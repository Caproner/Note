# 第九章 程序设计语言

本章主要讨论：

+ 程序设计语言的演化
+ 程序设计语言的大致编译过程
+ 四种计算机语言模式
+ 程序设计语言会用到的基本概念

简单的说，本章不会具体讨论一个详细的编程语言，而是较为广泛的讨论程序设计语言相关的知识。

## 程序设计语言演化

程序设计语言的演化经过三个阶段： 

+ 机器语言：只由0和1构成。在第5章中根据指令集翻译出来的二进制数字串即为机器语言。
  + 机器语言是计算机唯一能读懂的语言
  + 机器语言能够直接反映出计算机的运作，但其十分依赖硬件（不同硬件的指令集不同）
+ 汇编语言：机器语言之上的，直接使用文本的指令来作为程序设计语言
+ 高级语言：也就是我们现在所使用的编程语言。高级语言会先编译成汇编语言再编译成机器语言再执行。

## 翻译

程序设计语言转化为可执行指令的过程称为翻译。

翻译有两种方式：

+ 编译：将整个程序文件一次性翻译成可执行指令集
+ 解释：将程序文件逐行翻译成指令并执行（翻译一行执行一行）

其中Java采用了比较特殊的解释模式：

+ 首先，Java会将Java源程序编译为Java的字节代码
+ 其次，将Java字节代码放在JVM中，逐行解释

不管是编译还是解释，程序在翻译的过程所经过的步骤大致如下：

+ 词法分析：逐个读取程序文本的字符，并分析出程序中的词
+ 语法分析：逐个读取词法分析得到的词，分析得出程序中的指令
+ 语义分析：逐个读取语法分析得到的指令，分析会不会存在二义性等语义问题
+ 生成目标代码：将指令转化为目标代码
  + 目标代码可以是机器语言，汇编语言，甚至是另一种高级语言

## 编程模式

简单的说，编程模式就是计算机语言看待要解决问题的一种方式。

现有的编程模式可以分为4种：

+ 过程式
+ 面向对象
+ 函数式
+ 声明式

### 过程式

过程式将程序看作是操作对象的主动主体。

在过程式中每个对象都是被动的，需要由外部的**过程**来操作他们。

而过程往往是较为通用的，例如说复制文件，粘贴文件等。（其实过程可以类比为函数）。

而程序需要做的就是调用一个个的过程来完成自己需要完成的事情。

使用过程式的编程模式的语言有：FORTRAN，COBOL，Pascal，C，Ada等。

### 面向对象

不同于过程式将对象看作是被动个体，面向对象将对象看作是主动个体。

在面向对象中，每个对象都会暴露出可供调用的**方法**，程序通过调用方法操作对象。

同时，对象会由**类**来产生。类定义了一类对象的定义及其方法。

在面向对象中，类具有继承性和多态性：

+ 继承性：类的定义可以继承自另一个类。例如说矩形类就可以继承自几何体类
+ 多态性：基于继承的，我们可以定义一些相同名字的操作，但其在不同的类中有不同的实现。例如说矩形类和圆形类都继承自几何体类，几何体类定义一个用于计算面积的方法`area()`，那么在矩形类和圆形类中这两个方法的实现都是不尽相同的。

使用面向对象的编程模式的语言有：C++，Java等。

### 函数式

函数式将程序看作是函数，获取输入，给出输出。

在函数式的语言中，其会先给定一些已经实现的基础函数。程序员需要做的就是**使用这些函数来创造新的函数**，通过不断创造函数最终获得想要的程序（也就是最终函数）。

使用函数式的编程模式的语言有：LISP，Scheme等。

### 声明式

这种编程模式基于逻辑演算，通过程序员定下的逻辑条件，对给定的逻辑提问作出回答（回答true/false）。

举个例子，程序员可以使用这个语言定义`A is B`和`B is C`。那么这个程序在面对`A is C`这个提问就会给出`true`的回答。

使用声明式的编程模式的语言有：Prolog等。

## 程序语言通用概念

### 标识符

简单的讲就是**对象的名字**。如果没有标识符的话，程序员就不得不直接面对数据地址。标识符可以让程序员通过其来操作指定数据地址的数据。

### 数据类型

程序中都会给出用于规定数据组织方式的**数据类型**。其中包括：

+ 简单数据类型：程序语言规定的原子数据类型，例如整型，字符，布尔值
+ 复合数据类型：包括多个简单数据类型的数据类型，例如数组，字符串，结构体

依此衍生的概念有：

+ 变量：表示一个可供操作的存储单元，其由数据类型和标识符组成。
+ 字面值：一些在程序语言中使用的预定的值，例如说`2, 4.7, k`等。
+ 常量：不同于变量，常量一经定义就不可以做出改变。

### 输入&输出

这些操作一般会涉及到底层，故大多数程序设计语言会将这两个操作封装成函数来给程序员用。

### 表达式

简单的讲就是由一系列操作数和运算符组成的可运算成单一值的式子：

+ 运算符：包括算术运算符，逻辑运算符，关系运算符
+ 操作数：用于作为运算符的运算单元的单位，例如说字面值，变量或常量等

### 语句

在程序设计语言中，程序由语句组成。它在翻译的时候会被翻译为一个或多个指令执行。

语句主要分为：

+ 赋值语句
+ 复合语句：也就是多个语句组合而成，在C语言中体现为大括号括起来的多个语句。这个通常又叫做**块**
+ 控制语句：选择（`if, else`）或重复（`while, for`）
+ 调用子程序

#### 子程序

这个概念在第8章讲过了。这里讲其在程序设计语言中的连带引入的概念：

+ 局部变量：只会在子程序中生效的概念。这个概念也被部分语言衍生至块中。
+ 参数：外部程序调用子程序的时候可以传入参数。在这里又分为传值和传引用两种
  + 传值：将外部的变量/字面值/常量复制一份传入子程序中
  + 传引用：子程序可以直接操作指定的外部变量/常量，本质上就是传外部变量/常量的地址的值
+ 返回值：子程序可以将内部的值传出到外部

子程序在C语言中就是**函数**了。

